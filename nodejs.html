<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
	<head>
		<link rel="Stylesheet" type="text/css" href="style.css"/>
		<link rel="shortcut icon" type="image/x-icon" href="img/favicon.ico"/>
		<title>nodejs</title>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
		<link rel="stylesheet" type="text/css" href="sh/styles/shCore.css"/>
		<link rel="stylesheet" type="text/css" href="sh/styles/shThemeDefault.css"/>
                <link rel="stylesheet" href="style/bootstrap.css"/>
		<script src="sh/scripts/shCore.js" type="text/javascript"></script>
		<script src="sh/scripts/shAutoloader.js" type="text/javascript"></script>
                <script src="js/jquery.min.js"></script>
                <script src="js/bootstrap.js"></script>
                <script src="js/lihebi.js"></script>
		<!--
		<script src="sh/scripts/shBrushCpp.js" type="text/javascript"></script>
		<script src="sh/scripts/shBrushJava.js" type="text/javascript"></script>
		<script src="sh/scripts/shBrushXml.js" type="text/javascript"></script>
		<script src="sh/scripts/shBrushPython.js" type="text/javascript"></script>
		-->
	</head>
	<body>
            <div class="container">
	        
<h1 id="toc_1">Node.js</h1>
<p>
<a href="index.html">首页</a>
</p>

<div class="toc">
<ul>
<li><a href="#toc_1">Node.js</a>
<ul>
<li><a href="#toc_1.1">Tmp</a>
<li><a href="#toc_1.2">Install</a>
<li><a href="#toc_1.3">Grammar</a>
<ul>
<li><a href="#toc_1.3.1">module</a>
<li><a href="#toc_1.3.2">http</a>
<li><a href="#toc_1.3.3">filesystem</a>
<li><a href="#toc_1.3.4">socket.io</a>
</ul>
<li><a href="#toc_1.4">Hello World</a>
<li><a href="#toc_1.5">Packet Manager</a>
<ul>
<li><a href="#toc_1.5.1">package.json</a>
<li><a href="#toc_1.5.2">npm</a>
</ul>
</ul>
</ul>
</div>

<p>
<a href="express.html">express</a>
</p>

<h2 id="toc_1.1">Tmp</h2>
<p>
PaaS for Node.js
</p>
<ul>
<li>
Nodester

</ul>

<h2 id="toc_1.2">Install</h2>
<p>
<code>$ yum install nodejs</code>
</p>

<h2 id="toc_1.3">Grammar</h2>
<h3 id="toc_1.3.1">module</h3>
<pre class='brush: js'>
module.paths //若没有指定require文件的相对路径，且不是核心模块，会通过这个路径查找，很慢
module.exports
exports.func = function(){}
var v = require('./xx');
require.extensions //扩展加载方式
__filename
__dirname
// 下面5个可以使用，是node默认包装的
// 不能exports = xxx, 因为export是形参
(function(exports, require, module, __filename, __dirname) {
    //my file
});
</pre>
<h3 id="toc_1.3.2">http</h3>
<pre class="brush: js">
var http = require('http');
http.createServer(function(req, res) {
	res.writeHead(200, {'Content-Type': 'text/plain'});
	res.end('Hello World');
}).listen(8080, '0.0.0.0');
//some other header:
res.writeHead(301, { //redirect
	'Location': 'http://xxx.xxx.com'
});

var options = {
	host: 'xxx.com',
	port: 80,
	path: '/'
}
http.get(options, function(res){})
	.on('error', function(e) {
		console.log("err: "+e);
	});
//res
res.statusCode == 200;
</pre>

<h3 id="toc_1.3.3">filesystem</h3>
<pre class="brush: js">
var fs = require('fs');
fs.readFile('./index.html', function(error, data) {
	//manipulate 'data'
});
</pre>

<h3 id="toc_1.3.4">socket.io</h3>
<pre class="brush: js">
var server = http.createServer(function(){}).listen();
var io = require('socket.io').listen(server);
io.sockets.on('connection', function (socket) {
	console.log("connected");
	socket.on('disconnect', function() {
		console.log("disconnected");
	});
});
</pre>

<h2 id="toc_1.4">Hello World</h2>
<p>
a.js
</p>
<pre class="brush: js">
var http = require('http');
http.createServer(function(req, res) {
	res.writeHead(200, {'Content-Type': 'text/plain'});
	res.end('Hello World\n');
}).listen(1337, '127.0.0.1');
console.log('Server running at http://localhost:1337');
</pre>
<p>
<code>$ node a.js</code>
</p>

<h2 id="toc_1.5">Packet Manager</h2>
<h3 id="toc_1.5.1">package.json</h3>
<ul>
<li>
只能用"

<li>
,不能多
<pre>
name
description
version
keywords = ["xx", "xx"]
maintainers = [{"name":"Jack", "email":"xx@xx.com", "web":"http://xxx"}, {}, {}]
contributors
bugs
licenses
repositories
dependencies
homepage
os
cup
engine
builtin
directories
implements
scripts
</pre>

</ul>
<h3 id="toc_1.5.2">npm</h3>
<pre class="brush: shell">
npm install [packagename]
npm install -g [packagename] # global install
npm install # find package.json
npm docs [modulename]
npm edit [modulename] # read source code.
npm list

# autoload when modified
npm install -g node-dev
node-dev app

# install from local
npm install &lt;tarball file&gt;
npm install &lt;tarball url&gt;
npm install &lt;folder&gt; # contain package.json

# install from non-official source
npm install underscore --registry=http://registry.url
# set default source
npm config set registry http://registry.url
</pre>

            </div>
		<script type="text/javascript">
			function path()
			{
				var args = arguments, result = [];
				for (var i=0;i<args.length;i++)
					result.push(args[i].replace('@', './sh/scripts/'));
				return result;
			};
			SyntaxHighlighter.autoloader.apply(null, path(
				'applescript		@shBrushAppleScript.js',
				'actionscript3 as3	@shBrushAS3.js',
				'bash shell		@shBrushBash.js',
				'coldfusion cf		@shBrushColdFusion.js',
				'cpp c			@shBrushCpp.js',
				'c# c-sharp csharp	@shBrushCSharp.js',
				'css			@shBrushCss.js',
				'delphi pascal		@shBrushDelphi.js',
				'diff patch pas		@shBrushDiff.js',
				'erl erlang		@shBrushErlang.js',
				'groovy			@shBrushGroovy.js',
				'java			@shBrushJava.js',
				'jfx javafx		@shBrushJavaFX.js',
				'js jscript javascript	@shBrushJScript.js',
				'perl pl		@shBrushPerl.js',
				'php			@shBrushPhp.js',
				'text plain		@shBrushPlain.js',
				'py python		@shBrushPython.js',
				'ruby rails ror rb	@shBrushRuby.js',
				'sass scss		@shBrushSass.js',
				'scala			@shBrushScala.js',
				'sql			@shBrushSql.js',
				'vb vbnet		@shBrushVb.js',
				'xml xhtml xslt html	@shBrushXml.js'
			));
			SyntaxHighlighter.all();
		</script>
	</body>
</html>
