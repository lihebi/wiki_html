<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
	<head>
		<link rel="Stylesheet" type="text/css" href="style.css"/>
		<link rel="shortcut icon" type="image/x-icon" href="img/favicon.ico"/>
		<title>ruby</title>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
		<link rel="stylesheet" type="text/css" href="sh/styles/shCore.css"/>
		<link rel="stylesheet" type="text/css" href="sh/styles/shThemeDefault.css"/>
                <link rel="stylesheet" href="style/bootstrap.css"/>
		<script src="sh/scripts/shCore.js" type="text/javascript"></script>
		<script src="sh/scripts/shAutoloader.js" type="text/javascript"></script>
                <script src="js/jquery.min.js"></script>
                <script src="js/bootstrap.js"></script>
                <script src="js/lihebi.js"></script>
		<!--
		<script src="sh/scripts/shBrushCpp.js" type="text/javascript"></script>
		<script src="sh/scripts/shBrushJava.js" type="text/javascript"></script>
		<script src="sh/scripts/shBrushXml.js" type="text/javascript"></script>
		<script src="sh/scripts/shBrushPython.js" type="text/javascript"></script>
		-->
	</head>
	<body>
            <div class="container">
	        
<h1 id="toc_1">Ruby</h1>
<p>
<a href="index.html">首页</a>
<div class="toc">
<ul>
<li><a href="#toc_1">Ruby</a>
<ul>
<li><a href="#toc_1.1">syntax</a>
<li><a href="#toc_1.2">ruby.taobao.org</a>
<li><a href="#toc_1.3">Gem Install Packets</a>
<li><a href="#toc_1.4">bundle</a>
<li><a href="#toc_1.5">Trouble Shooting</a>
</ul>
</ul>
</div>
</p>

<p>
<a href="rails.html">rails</a>
</p>

<p>
irb: interactive ruby
</p>

<h2 id="toc_1.1">syntax</h2>
<p>
注释
</p>
<pre class="brush: ruby">
# commit
=begin
commit
commit
=end
# no ';'
</pre>

<p>
变量
</p>
<pre class="brush: ruby">
x='56' # local variable
@x = 'xxx' # instance variable
@@x = 'xxx' # class variable( static variable)
$x = 'xxx' # global variable
Mart = 'xxx' # constant, 首字母或全部字母大写
x,y,z = 1,2,3
a,b,c = 1,'xx',3.21
</pre>

<p>
String
</p>
<pre class="brush: ruby">
s = 'xx cc bb ee ww qq'
s[3..7]
s[-6..-1]
</pre>

<p>
字符串输入输出
</p>
<pre class="brush: ruby">
puts 'hello world'
s = 'xxx'
puts s
# #{..}表达式输出运算结果
puts 'hello, #{s}'
#{2+2} #==&gt; 4
#{ARGV[0]}
puts 'hello' + 'world'
puts 'hello' &lt;&lt; 'world'
puts 'hello' * 3
5.times { print 'hello' }
puts 'hello' + `ruby -v`
hi = 'hello %s'
puts hi % 'hebi'
'%s %s' % ['hello', 'world']
sprintf('hello, %s', 'hebi') # ==&gt; 'hello hebi'
printf('hello, %s', 'hebi') # ==&gt; hello hebi
</pre>

<p>
re
</p>
<pre class="brush: ruby">
s = 'xxx bbb kkk'
s.scan(/\w+/) # ==&gt; ['xxx', 'bbb', 'kkk']
</pre>

<p>
系统命令
</p>
<pre class="brush: ruby">
system "echo 'hello world'"
system 'echo', 'hello', world'
</pre>

<p>
eval
<code>eval "puts 'hello world'" # ==&gt; hello world</code>
in shell, -e means eval
<code>ruby -e "puts 'hello world'"</code>
<code>ruby -e "puts 'hello world'" -e "puts 'hello world'"</code>
</p>

<p>
gets
</p>
<pre class="brush: ruby">
hello = gets
puts hello
</pre>

<p>
def
</p>
<pre class="brush: ruby">
def func
    puts 'hello'
end
func
</pre>

<p>
yield
</p>
<pre class="brush: ruby">
def func
    yield # exec codes in the brace
end
func { puts 'hello' }
</pre>

<p>
each
</p>
<pre class="brush: ruby">
# array
# |e| 代表来自数组的元素 
['hello', 'world'].each { |e| print e }
</pre>

<p>
proc
</p>
<pre class="brush: ruby">
prc = lambda { |name| puts "hello "+name }
prc.call 'hebi'
</pre>

<p>
if
</p>
<pre class="brush: ruby">
if 1 == 1
    print 'true'
elsif 2 == 2
    print '2'
else
    print '3'
end
</pre>

<h2 id="toc_1.2">ruby.taobao.org</h2>
<p>
gem is very slow:
use ruby.taobao.org
$ gem sources --remove <a href="https://rubygems.org/">https://rubygems.org/</a>
$ gem sources -a <a href="http://ruby.taobao.org/">http://ruby.taobao.org/</a>
</p>

<p>
for bundle, in Gemfile:
source '<a href="http://ruby.taobao.org'">http://ruby.taobao.org'</a>
</p>


<h2 id="toc_1.3">Gem Install Packets</h2>
<p>
sudo gem install rails -V # verbose
gem install xxx -v 1.1.0 # install a specific version of a ruby gem
gem # show help
gem help
gem list
gem uninstall xxx
gem search xxx # search remote
gem dep rails
gem update --system
</p>

<h2 id="toc_1.4">bundle</h2>
<p>
bundle show
</p>

<h2 id="toc_1.5">Trouble Shooting</h2>
<p>
can't use gem install on mac:
</p>

<p>
<code>ARCHFLAGS=-Wno-error=unused-command-line-argument-hard-error-in-future sudo gem install GemName # wrong!!</code>
<code>sudo ARCHFLAGS=-Wno-error=unused-command-line-argument-hard-error-in-future gem install rails -V # yes</code>
</p>

            </div>
		<script type="text/javascript">
			function path()
			{
				var args = arguments, result = [];
				for (var i=0;i<args.length;i++)
					result.push(args[i].replace('@', './sh/scripts/'));
				return result;
			};
			SyntaxHighlighter.autoloader.apply(null, path(
				'applescript		@shBrushAppleScript.js',
				'actionscript3 as3	@shBrushAS3.js',
				'bash shell		@shBrushBash.js',
				'coldfusion cf		@shBrushColdFusion.js',
				'cpp c			@shBrushCpp.js',
				'c# c-sharp csharp	@shBrushCSharp.js',
				'css			@shBrushCss.js',
				'delphi pascal		@shBrushDelphi.js',
				'diff patch pas		@shBrushDiff.js',
				'erl erlang		@shBrushErlang.js',
				'groovy			@shBrushGroovy.js',
				'java			@shBrushJava.js',
				'jfx javafx		@shBrushJavaFX.js',
				'js jscript javascript	@shBrushJScript.js',
				'perl pl		@shBrushPerl.js',
				'php			@shBrushPhp.js',
				'text plain		@shBrushPlain.js',
				'py python		@shBrushPython.js',
				'ruby rails ror rb	@shBrushRuby.js',
				'sass scss		@shBrushSass.js',
				'scala			@shBrushScala.js',
				'sql			@shBrushSql.js',
				'vb vbnet		@shBrushVb.js',
				'xml xhtml xslt html	@shBrushXml.js'
			));
			SyntaxHighlighter.all();
		</script>
	</body>
</html>
